CKnewor 4 Changelog
====================

## CKnewor 4.3.1

**Important Notes:**

* To match the naming convention, the `language` button is now `Language` ([#11201](http://dev.cknewor.com/ticket/11201)).
* [Enhanced Image](http://cknewor.com/addon/image2) button, context menu, command, and icon names match those of the [Image](http://cknewor.com/addon/image) plugin ([#11222](http://dev.cknewor.com/ticket/11222)).

Fixed Issues:

* [#11244](http://dev.cknewor.com/ticket/11244): Changed: The [`widget.repository.checkWidgets()`](http://docs.cknewor.com/#!/api/CKnewOR.plugins.widget.repository-method-checkWidgets) method now fires the [`widget.repository.checkWidgets`](http://docs.cknewor.com/#!/api/CKnewOR.plugins.widget.repository-event-checkWidgets) event, so from CKnewor 4.3.1 it is preferred to use the method rather than fire the event.
* [#11171](http://dev.cknewor.com/ticket/11171): Fixed: [`newor.insertElement()`](http://docs.cknewor.com/#!/api/CKnewOR.newor-method-insertElement) and [`newor.insertText()`](http://docs.cknewor.com/#!/api/CKnewOR.newor-method-insertText) methods do not call the [`widget.repository.checkWidgets()`](http://docs.cknewor.com/#!/api/CKnewOR.plugins.widget.repository-method-checkWidgets) method.
* [#11085](http://dev.cknewor.com/ticket/11085): [IE8] Replaced preview generated by the [Mathematical Formulas](http://cknewor.com/addon/mathjax) widget with a placeholder.
* [#11044](http://dev.cknewor.com/ticket/11044): Enhanced WAI-ARIA support for the [Language](http://cknewor.com/addon/language) plugin drop-down menu.
* [#11075](http://dev.cknewor.com/ticket/11075): With drop-down menu button focused, pressing the *Down Arrow* key will now open the menu and focus its first option.
* [#11165](http://dev.cknewor.com/ticket/11165): Fixed: The [File Browser](http://cknewor.com/addon/filebrowser) plugin cannot be removed from the newor.
* [#11159](http://dev.cknewor.com/ticket/11159): [IE9-10] [Enhanced Image](http://cknewor.com/addon/image2): Fixed buggy discovery of image dimensions.
* [#11101](http://dev.cknewor.com/ticket/11101): Drop-down lists no longer break when given double quotes.
* [#11077](http://dev.cknewor.com/ticket/11077): [Enhanced Image](http://cknewor.com/addon/image2): Empty undo step recorded when resizing the image.
* [#10853](http://dev.cknewor.com/ticket/10853): [Enhanced Image](http://cknewor.com/addon/image2): Widget has paragraph wrapper when de-captioning unaligned image.
* [#11198](http://dev.cknewor.com/ticket/11198): Widgets: Drag handler is not fully visible when an inline widget is in a heading.
* [#11132](http://dev.cknewor.com/ticket/11132): [Firefox] Fixed: Caret is lost after drag and drop of an inline widget.
* [#11182](http://dev.cknewor.com/ticket/11182): [IE10-11] Fixed: newor crashes (IE11) or works with minor issues (IE10) if a page is loaded in Quirks Mode. See [`env.quirks`](http://docs.cknewor.com/#!/api/CKnewOR.env-property-quirks) for more details.
* [#11204](http://dev.cknewor.com/ticket/11204): Added `figure` and `figcaption` styles to the `contents.css` file so [Enhanced Image](http://cknewor.com/addon/image2) looks nicer.
* [#11202](http://dev.cknewor.com/ticket/11202): Fixed: No newline in [BBCode](http://cknewor.com/addon/bbcode) mode.
* [#10890](http://dev.cknewor.com/ticket/10890): Fixed: Error thrown when pressing the *Delete* key in a list item.
* [#10055](http://dev.cknewor.com/ticket/10055): [IE8-10] Fixed: *Delete* pressed on a selected image causes the browser to go back.
* [#11183](http://dev.cknewor.com/ticket/11183): Fixed: Inserting a horizontal rule or a table in multiple row selection causes a browser crash. Additionally, the [`newor.insertElement()`](http://docs.cknewor.com/#!/api/CKnewOR.newor-method-insertElement) method does not insert the element into every range of a selection any more.
* [#11042](http://dev.cknewor.com/ticket/11042): Fixed: Selection made on an element containing a non-newable element was not auto faked.
* [#11125](http://dev.cknewor.com/ticket/11125): Fixed: Keyboard navigation through menu and drop-down items will now cycle.
* [#11011](http://dev.cknewor.com/ticket/11011): Fixed: The [`newor.applyStyle()`](http://docs.cknewor.com/#!/api/CKnewOR.newor-method-applyStyle) method removes attributes from nested elements.
* [#11179](http://dev.cknewor.com/ticket/11179): Fixed: [`newor.destroy()`](http://docs.cknewor.com/#!/api/CKnewOR.newor-method-destroy) does not cleanup content generated by the [Table Resize](http://cknewor.com/addon/tableresize) plugin for inline newors.
* [#11237](http://dev.cknewor.com/ticket/11237): Fixed: Table border attribute value is deleted when pasting content from Microsoft Word.
* [#11250](http://dev.cknewor.com/ticket/11250): Fixed: HTML entities inside the `<textarea>` element are not encoded.
* [#11260](http://dev.cknewor.com/ticket/11260): Fixed: Initially disabled buttons are not read by JAWS as disabled.
* [#11200](http://dev.cknewor.com/ticket/11200):  Added [Clipboard](http://cknewor.com/addon/clipboard) plugin as a dependency for [Widget](http://cknewor.com/addon/widget) to fix drag and drop.

## CKnewor 4.3

New Features:

* [#10612](http://dev.cknewor.com/ticket/10612): Internet Explorer 11 support.
* [#10869](http://dev.cknewor.com/ticket/10869): Widgets: Added better integration with the [Elements Path](http://cknewor.com/addon/elementspath) plugin.
* [#10886](http://dev.cknewor.com/ticket/10886): Widgets: Added tooltip to the drag handle.
* [#10933](http://dev.cknewor.com/ticket/10933): Widgets: Introduced drag and drop of block widgets with the [Line Utilities](http://cknewor.com/addon/lineutils) plugin.
* [#10936](http://dev.cknewor.com/ticket/10936): Widget System changes for easier integration with other dialog systems.
* [#10895](http://dev.cknewor.com/ticket/10895): [Enhanced Image](http://cknewor.com/addon/image2): Added file browser integration.
* [#11002](http://dev.cknewor.com/ticket/11002): Added the [`draggable`](http://docs.cknewor.com/#!/api/CKnewOR.plugins.widget.definition-property-draggable) option to disable drag and drop support for widgets.
* [#10937](http://dev.cknewor.com/ticket/10937): [Mathematical Formulas](http://cknewor.com/addon/mathjax) widget improvements:
  * loading indicator ([#10948](http://dev.cknewor.com/ticket/10948)),
  * applying paragraph changes (like font color change) to iframe ([#10841](http://dev.cknewor.com/ticket/10841)),
  * Firefox and IE9 clipboard fixes ([#10857](http://dev.cknewor.com/ticket/10857)),
  * fixing same origin policy issue ([#10840](http://dev.cknewor.com/ticket/10840)),
  * fixing undo bugs ([#10842](http://dev.cknewor.com/ticket/10842), [#10930](http://dev.cknewor.com/ticket/10930)),
  * fixing other minor bugs.
* [#10862](http://dev.cknewor.com/ticket/10862): [Placeholder](http://cknewor.com/addon/placeholder) plugin was rewritten as a widget.
* [#10822](http://dev.cknewor.com/ticket/10822): Added styles system integration with non-newable elements (for example widgets) and their nested newables. Styles cannot change non-newable content and are applied in nested newable only if allowed by its type and content filter.
* [#10856](http://dev.cknewor.com/ticket/10856): Menu buttons will now toggle the visibility of their panels when clicked multiple times. [Language](http://cknewor.com/addon/language) plugin fixes: Added active language highlighting, added an option to remove the language.
* [#10028](http://dev.cknewor.com/ticket/10028): New [`config.dialog_noConfirmCancel`](http://docs.cknewor.com/#!/api/CKnewOR.config-cfg-dialog_noConfirmCancel) configuration option that eliminates the need to confirm closing of a dialog window when the user changed any of its fields.
* [#10848](http://dev.cknewor.com/ticket/10848): Integrate remaining plugins ([Styles](http://cknewor.com/addon/stylescombo), [Format](http://cknewor.com/addon/format), [Font](http://cknewor.com/addon/font), [Color Button](http://cknewor.com/addon/colorbutton), [Language](http://cknewor.com/addon/language) and [Indent](http://cknewor.com/addon/indent)) with [active filter](http://docs.cknewor.com/#!/api/CKnewOR.newor-property-activeFilter).
* [#10855](http://dev.cknewor.com/ticket/10855): Change the extension of emoticons in the [BBCode](http://cknewor.com/addon/bbcode) sample from GIF to PNG.

Fixed Issues:

* [#10831](http://dev.cknewor.com/ticket/10831): [Enhanced Image](http://cknewor.com/addon/image2): Merged `image2inline` and `image2block` into one `image2` widget.
* [#10835](http://dev.cknewor.com/ticket/10835): [Enhanced Image](http://cknewor.com/addon/image2): Improved visibility of the resize handle.
* [#10836](http://dev.cknewor.com/ticket/10836): [Enhanced Image](http://cknewor.com/addon/image2): Preserve custom mouse cursor while resizing the image.
* [#10939](http://dev.cknewor.com/ticket/10939): [Firefox] [Enhanced Image](http://cknewor.com/addon/image2): hovering the image causes it to change.
* [#10866](http://dev.cknewor.com/ticket/10866): Fixed: Broken *Tab* key navigation in the [Enhanced Image](http://cknewor.com/addon/image2) dialog window.
* [#10833](http://dev.cknewor.com/ticket/10833): Fixed: *Lock ratio* option should be on by default in the [Enhanced Image](http://cknewor.com/addon/image2) dialog window.
* [#10881](http://dev.cknewor.com/ticket/10881): Various improvements to *Enter* key behavior in nested newables.
* [#10879](http://dev.cknewor.com/ticket/10879): [Remove Format](http://cknewor.com/addon/removeformat) should not leak from a nested newable.
* [#10877](http://dev.cknewor.com/ticket/10877): Fixed: [WebSpellChecker](http://cknewor.com/addon/wsc) fails to apply changes if a nested newable was focused.
* [#10877](http://dev.cknewor.com/ticket/10877): Fixed: [SCAYT](http://cknewor.com/addon/wsc) blocks typing in nested newables.
* [#11079](http://dev.cknewor.com/ticket/11079): Add button icons to the [Placeholder](http://cknewor.com/addon/placeholder) sample.
* [#10870](http://dev.cknewor.com/ticket/10870): The `paste` command is no longer being disabled when the clipboard is empty.
* [#10854](http://dev.cknewor.com/ticket/10854): Fixed: Firefox prepends `<br>` to `<body>`, so it is stripped by the HTML data processor.
* [#10823](http://dev.cknewor.com/ticket/10823): Fixed: [Link](http://cknewor.com/addon/link) plugin does not work with non-newable content.
* [#10828](http://dev.cknewor.com/ticket/10828): [Magic Line](http://cknewor.com/addon/magicline) integration with the Widget System.
* [#10865](http://dev.cknewor.com/ticket/10865): Improved hiding copybin, so copying widgets works smoothly.
* [#11066](http://dev.cknewor.com/ticket/11066): Widget's private parts use CSS reset.
* [#11027](http://dev.cknewor.com/ticket/11027): Fixed: Block commands break on widgets; added the [`contentDomInvalidated`](http://docs.cknewor.com/#!/api/CKnewOR.newor-event-contentDomInvalidated) event.
* [#10430](http://dev.cknewor.com/ticket/10430): Resolve dependence of the [Image](http://cknewor.com/addon/image) plugin on the [Form Elements](http://cknewor.com/addon/forms) plugin.
* [#10911](http://dev.cknewor.com/ticket/10911): Fixed: Browser *Alt* hotkeys will no longer be blocked while a widget is focused.
* [#11082](http://dev.cknewor.com/ticket/11082): Fixed: Selected widget is not copied or cut when using toolbar buttons or context menu.
* [#11083](http://dev.cknewor.com/ticket/11083): Fixed list and div element application to block widgets.
* [#10887](http://dev.cknewor.com/ticket/10887): Internet Explorer 8 compatibility issues related to the Widget System.
* [#11074](http://dev.cknewor.com/ticket/11074): Temporarily disabled inline widget drag and drop, because of seriously buggy native `range#moveToPoint` method.
* [#11098](http://dev.cknewor.com/ticket/11098): Fixed: Wrong selection position after undoing widget drag and drop.
* [#11110](http://dev.cknewor.com/ticket/11110): Fixed: IFrame and Flash objects are being incorrectly pasted in certain conditions.
* [#11129](http://dev.cknewor.com/ticket/11129): Page break is lost when loading data.
* [#11123](http://dev.cknewor.com/ticket/11123): [Firefox] Widget is destroyed after being dragged outside of `<body>`.
* [#11124](http://dev.cknewor.com/ticket/11124): Fixed the [Elements Path](http://cknewor.com/addon/elementspath) in an newor using the [Div newing Area](http://cknewor.com/addon/divarea).

## CKnewor 4.3 Beta

New Features:

* [#9764](http://dev.cknewor.com/ticket/9764): Widget System.
  * [Widget plugin](http://cknewor.com/addon/widget) introducing the [Widget API](http://docs.cknewor.com/#!/api/CKnewOR.plugins.widget).
  * New [`newor.enterMode`](http://docs.cknewor.com/#!/api/CKnewOR.newor-property-enterMode) and [`newor.shiftEnterMode`](http://docs.cknewor.com/#!/api/CKnewOR.newor-property-shiftEnterMode) properties &ndash; normalized versions of [`config.enterMode`](http://docs.cknewor.com/#!/api/CKnewOR.config-cfg-enterMode) and [`config.shiftEnterMode`](http://docs.cknewor.com/#!/api/CKnewOR.config-cfg-shiftEnterMode).
  * Dynamic newor settings. Starting from CKnewor 4.3 Beta, *Enter* mode values and [content filter](http://docs.cknewor.com/#!/guide/dev_advanced_content_filter) instances may be changed dynamically (for example when the caret was placed in an element in which newor features should be adjusted). When you are implementing a new newor feature, you should base its behavior on [dynamic](http://docs.cknewor.com/#!/api/CKnewOR.newor-property-activeEnterMode) or [static](http://docs.cknewor.com/#!/api/CKnewOR.newor-property-enterMode) *Enter* mode values depending on whether this feature works in selection context or globally on newor content.
      * Dynamic *Enter* mode values &ndash; [`newor.setActiveEnterMode`](http://docs.cknewor.com/#!/api/CKnewOR.newor-method-setActiveEnterMode) method, [`newor.activeEnterModeChange`](http://docs.cknewor.com/#!/api/CKnewOR.newor-event-activeEnterModeChange) event, and two properties: [`newor.activeEnterMode`](http://docs.cknewor.com/#!/api/CKnewOR.newor-property-activeEnterMode) and [`newor.activeShiftEnterMode`](http://docs.cknewor.com/#!/api/CKnewOR.newor-property-activeShiftEnterMode).
      * Dynamic content filter instances &ndash; [`newor.setActiveFilter`](http://docs.cknewor.com/#!/api/CKnewOR.newor-method-setActiveFilter) method, [`newor.activeFilterChange`](http://docs.cknewor.com/#!/api/CKnewOR.newor-event-activeFilterChange) event, and [`newor.activeFilter`](http://docs.cknewor.com/#!/api/CKnewOR.newor-property-activeFilter) property.
  * "Fake" selection was introduced. It makes it possible to virtually select any element when the real selection remains hidden. See the  [`selection.fake`](http://docs.cknewor.com/#!/api/CKnewOR.dom.selection-method-fake) method.
  * Default [`htmlParser.filter`](http://docs.cknewor.com/#!/api/CKnewOR.htmlParser.filter) rules are not applied to non-newable elements (elements with `contentnewable` attribute set to `false` and their descendants) anymore. To add a rule which will be applied to all elements you need to pass an additional argument to the [`filter.addRules`](http://docs.cknewor.com/#!/api/CKnewOR.htmlParser.filter-method-addRules) method.
  * Dozens of new methods were introduced &ndash; most interesting ones:
      * [`document.find`](http://docs.cknewor.com/#!/api/CKnewOR.dom.document-method-find),
      * [`document.findOne`](http://docs.cknewor.com/#!/api/CKnewOR.dom.document-method-findOne),
      * [`newable.insertElementIntoRange`](http://docs.cknewor.com/#!/api/CKnewOR.newable-method-insertElementIntoRange),
      * [`range.moveToClosestnewablePosition`](http://docs.cknewor.com/#!/api/CKnewOR.dom.range-method-moveToClosestnewablePosition),
      * New methods for [`htmlParser.node`](http://docs.cknewor.com/#!/api/CKnewOR.htmlParser.node) and [`htmlParser.element`](http://docs.cknewor.com/#!/api/CKnewOR.htmlParser.element).
* [#10659](http://dev.cknewor.com/ticket/10659): New [Enhanced Image](http://cknewor.com/addon/image2) plugin that introduces a widget with integrated image captions, an option to center images, and dynamic "click and drag" resizing.
* [#10664](http://dev.cknewor.com/ticket/10664): New [Mathematical Formulas](http://cknewor.com/addon/mathjax) plugin that introduces the MathJax widget.
* [#7987](https://dev.cknewor.com/ticket/7987): New [Language](http://cknewor.com/addon/language) plugin that implements Language toolbar button to support [WCAG 3.1.2 Language of Parts](http://www.w3.org/TR/UNDERSTANDING-WCAG20/meaning-other-lang-id.html).
* [#10708](http://dev.cknewor.com/ticket/10708): New [smileys](http://cknewor.com/addon/smiley).

## CKnewor 4.2.3

Fixed Issues:

* [#10994](http://dev.cknewor.com/ticket/10994): Fixed: Loading external jQuery library when opening the [jQuery Adapter](http://docs.cknewor.com/#!/guide/dev_jquery) sample directly from file.
* [#10975](http://dev.cknewor.com/ticket/10975): [IE] Fixed: Error thrown while opening the color palette.
* [#9929](http://dev.cknewor.com/ticket/9929): [Blink/WebKit] Fixed: A non-breaking space is created once a character is deleted and a regular space is typed.
* [#10963](http://dev.cknewor.com/ticket/10963): Fixed: JAWS issue with the keyboard shortcut for [Magic Line](http://cknewor.com/addon/magicline).
* [#11096](http://dev.cknewor.com/ticket/11096): Fixed: TypeError: Object has no method 'is'.

## CKnewor 4.2.2

Fixed Issues:

* [#9314](http://dev.cknewor.com/ticket/9314): Fixed: Incorrect error message on closing a dialog window without saving changs.
* [#10308](http://dev.cknewor.com/ticket/10308): [IE10] Fixed: Unspecified error when deleting a row.
* [#10945](http://dev.cknewor.com/ticket/10945): [Chrome] Fixed: Clicking with a mouse inside the newor does not show the caret.
* [#10912](http://dev.cknewor.com/ticket/10912): Prevent default action when content of a non-newable link is clicked.
* [#10913](http://dev.cknewor.com/ticket/10913): Fixed [`CKnewOR.plugins.addExternal`](http://docs.cknewor.com/#!/api/CKnewOR.resourceManager-method-addExternal) not handling paths including file name specified.
* [#10666](http://dev.cknewor.com/ticket/10666): Fixed [`CKnewOR.tools.isArray`](http://docs.cknewor.com/#!/api/CKnewOR.tools-method-isArray) not working cross frame.
* [#10910](http://dev.cknewor.com/ticket/10910): [IE9] Fixed JavaScript error thrown in Compatibility Mode when clicking and/or typing in the newing area.
* [#10868](http://dev.cknewor.com/ticket/10868): [IE8] Prevent the browser from crashing when applying the Inline Quotation style.
* [#10915](http://dev.cknewor.com/ticket/10915): Fixed: Invalid CSS filter in the Kama skin.
* [#10914](http://dev.cknewor.com/ticket/10914): Plugins [Indent List](http://cknewor.com/addon/indentlist) and [Indent Block](http://cknewor.com/addon/indentblock) are now included in the build configuration.
* [#10812](http://dev.cknewor.com/ticket/10812): Fixed [`range#createBookmark2`](http://docs.cknewor.com/#!/api/CKnewOR.dom.range-method-createBookmark2) incorrectly normalizing offsets. This bug was causing many issues: [#10850](http://dev.cknewor.com/ticket/10850), [#10842](http://dev.cknewor.com/ticket/10842).
* [#10951](http://dev.cknewor.com/ticket/10951): Reviewed and optimized focus handling on panels (combo, menu buttons, color buttons, and context menu) to enhance accessibility. Fixed [#10705](http://dev.cknewor.com/ticket/10705), [#10706](http://dev.cknewor.com/ticket/10706) and [#10707](http://dev.cknewor.com/ticket/10707).
* [#10704](http://dev.cknewor.com/ticket/10704): Fixed a JAWS issue with the Select Color dialog window title not being announced.
* [#10753](http://dev.cknewor.com/ticket/10753): The floating toolbar in inline instances now has a dedicated accessibility label.

## CKnewor 4.2.1

Fixed Issues:

* [#10301](http://dev.cknewor.com/ticket/10301): [IE9-10] Undo fails after 3+ consecutive paste actions with a JavaScript error.
* [#10689](http://dev.cknewor.com/ticket/10689): Save toolbar button saves only the first newor instance.
* [#10368](http://dev.cknewor.com/ticket/10368): Move language reading direction definition (`dir`) from main language file to core.
* [#9330](http://dev.cknewor.com/ticket/9330): Fixed pasting anchors from MS Word.
* [#8103](http://dev.cknewor.com/ticket/8103): Fixed pasting nested lists from MS Word.
* [#9958](http://dev.cknewor.com/ticket/9958): [IE9] Pressing the "OK" button will trigger the `onbeforeunload` event in the popup dialog.
* [#10662](http://dev.cknewor.com/ticket/10662): Fixed styles from the Styles drop-down list not registering to the ACF in case when the [Shared Spaces plugin](http://cknewor.com/addon/sharedspace) is used.
* [#9654](http://dev.cknewor.com/ticket/9654): Problems with Internet Explorer 10 Quirks Mode.
* [#9816](http://dev.cknewor.com/ticket/9816): Floating toolbar does not reposition vertically in several cases.
* [#10646](http://dev.cknewor.com/ticket/10646): Removing a selected sublist or nested table with *Backspace/Delete* removes the parent element.
* [#10623](http://dev.cknewor.com/ticket/10623): [WebKit] Page is scrolled when opening a drop-down list.
* [#10004](http://dev.cknewor.com/ticket/10004): [ChromeVox] Button names are not announced.
* [#10731](http://dev.cknewor.com/ticket/10731): [WebSpellChecker](http://cknewor.com/addon/wsc) plugin breaks cloning of newor configuration.
* It is now possible to set per instance [WebSpellChecker](http://cknewor.com/addon/wsc) plugin configuration instead of setting the configuration globally.

## CKnewor 4.2

**Important Notes:**

* Dropped compatibility support for Internet Explorer 7 and Firefox 3.6.

* Both the Basic and the Standard distribution packages will not contain the new [Indent Block](http://cknewor.com/addon/indentblock) plugin. Because of this the [Advanced Content Filter](http://docs.cknewor.com/#!/guide/dev_advanced_content_filter) might remove block indentations from existing contents. If you want to prevent this, either [add an appropriate ACF rule to your filter](http://docs.cknewor.com/#!/guide/dev_allowed_content_rules) or create a custom build based on the Basic/Standard package and add the Indent Block plugin in [CKBuilder](http://cknewor.com/builder).

New Features:

* [#10027](http://dev.cknewor.com/ticket/10027): Separated list and block indentation into two plugins: [Indent List](http://cknewor.com/addon/indentlist) and [Indent Block](http://cknewor.com/addon/indentblock).
* [#8244](http://dev.cknewor.com/ticket/8244): Use *(Shift+)Tab* to indent and outdent lists.
* [#10281](http://dev.cknewor.com/ticket/10281): The [jQuery Adapter](http://docs.cknewor.com/#!/guide/dev_jquery) is now available. Several jQuery-related issues fixed: [#8261](http://dev.cknewor.com/ticket/8261), [#9077](http://dev.cknewor.com/ticket/9077), [#8710](http://dev.cknewor.com/ticket/8710), [#8530](http://dev.cknewor.com/ticket/8530), [#9019](http://dev.cknewor.com/ticket/9019), [#6181](http://dev.cknewor.com/ticket/6181), [#7876](http://dev.cknewor.com/ticket/7876), [#6906](http://dev.cknewor.com/ticket/6906).
* [#10042](http://dev.cknewor.com/ticket/10042): Introduced [`config.title`](http://docs.cknewor.com/#!/api/CKnewOR.config-cfg-title) setting to change the human-readable title of the newor.
* [#9794](http://dev.cknewor.com/ticket/9794): Added [`newor.onChange`](http://docs.cknewor.com/#!/api/CKnewOR.newor-event-change) event.
* [#9923](http://dev.cknewor.com/ticket/9923): HiDPI support in the newor UI. HiDPI icons for [Moono skin](http://cknewor.com/addon/moono) added.
* [#8031](http://dev.cknewor.com/ticket/8031): Handle `required` attributes on `<textarea>` elements &mdash; introduced [`newor.required`](http://docs.cknewor.com/#!/api/CKnewOR.newor-event-required) event.
* [#10280](http://dev.cknewor.com/ticket/10280): Ability to replace `<textarea>` elements with the inline newor.

Fixed Issues:

* [#10599](http://dev.cknewor.com/ticket/10599): [Indent](http://cknewor.com/addon/indent) plugin is no longer required by the [List](http://cknewor.com/addon/list) plugin.
* [#10370](http://dev.cknewor.com/ticket/10370): Inconsistency in data events between framed and inline newors.
* [#10438](http://dev.cknewor.com/ticket/10438): [FF, IE] No selection is done on an newable element on executing [`newor.setData()`](http://docs.cknewor.com/#!/api/CKnewOR.newor-method-setData).

## CKnewor 4.1.3

New Features:

* Added new translation: Indonesian.

Fixed Issues:

* [#10644](http://dev.cknewor.com/ticket/10644): Fixed a critical bug when pasting plain text in Blink-based browsers.
* [#5189](http://dev.cknewor.com/ticket/5189): [Find/Replace](http://cknewor.com/addon/find) dialog window: rename "Cancel" button to "Close".
* [#10562](http://dev.cknewor.com/ticket/10562): [Housekeeping] Unified CSS gradient filter formats in the [Moono](http://cknewor.com/addon/moono) skin.
* [#10537](http://dev.cknewor.com/ticket/10537): Advanced Content Filter should register a default rule for [`config.shiftEnterMode`](http://docs.cknewor.com/#!/api/CKnewOR.config-cfg-shiftEnterMode).
* [#10610](http://dev.cknewor.com/ticket/10610): [`CKnewOR.dialog.addIframe()`](http://docs.cknewor.com/#!/api/CKnewOR.dialog-static-method-addIframe) incorrectly sets the iframe size in dialog windows.

## CKnewor 4.1.2

New Features:

* Added new translation: Sinhala.

Fixed Issues:

* [#10339](http://dev.cknewor.com/ticket/10339): Fixed: Error thrown when inserted data was totally stripped out after filtering and processing.
* [#10298](http://dev.cknewor.com/ticket/10298): Fixed: Data processor breaks attributes containing protected parts.
* [#10367](http://dev.cknewor.com/ticket/10367): Fixed: [`newable.insertText()`](http://docs.cknewor.com/#!/api/CKnewOR.newable-method-insertText) loses characters when `RegExp` replace controls are being inserted.
* [#10165](http://dev.cknewor.com/ticket/10165): [IE] Access denied error when `document.domain` has been altered.
* [#9761](http://dev.cknewor.com/ticket/9761): Update the *Backspace* key state in [`keystrokeHandler.blockedKeystrokes`](http://docs.cknewor.com/#!/api/CKnewOR.keystrokeHandler-property-blockedKeystrokes) when calling [`newor.setReadOnly()`](http://docs.cknewor.com/#!/api/CKnewOR.newor-method-setReadOnly).
* [#6504](http://dev.cknewor.com/ticket/6504): Fixed: Race condition while loading several [`config.customConfig`](http://docs.cknewor.com/#!/api/CKnewOR.config-cfg-customConfig) files.
* [#10146](http://dev.cknewor.com/ticket/10146): [Firefox] Empty lines are being removed while [`config.enterMode`](http://docs.cknewor.com/#!/api/CKnewOR.config-cfg-enterMode) is [`CKnewOR.ENTER_BR`](http://docs.cknewor.com/#!/api/CKnewOR-property-ENTER_BR).
* [#10360](http://dev.cknewor.com/ticket/10360): Fixed: ARIA `role="application"` should not be used for dialog windows.
* [#10361](http://dev.cknewor.com/ticket/10361): Fixed: ARIA `role="application"` should not be used for floating panels.
* [#10510](http://dev.cknewor.com/ticket/10510): Introduced unique voice labels to differentiate between different newor instances.
* [#9945](http://dev.cknewor.com/ticket/9945): [iOS] Scrolling not possible on iPad.
* [#10389](http://dev.cknewor.com/ticket/10389): Fixed: Invalid HTML in the "Text and Table" template.
* [WebSpellChecker](http://cknewor.com/addon/wsc) plugin user interface was changed to match CKnewor 4 style.

## CKnewor 4.1.1

New Features:

* Added new translation: Albanian.

Fixed Issues:

* [#10172](http://dev.cknewor.com/ticket/10172): Pressing *Delete* or *Backspace* in an empty table cell moves the cursor to the next/previous cell.
* [#10219](http://dev.cknewor.com/ticket/10219): Error thrown when destroying an newor instance in parallel with a `mouseup` event.
* [#10265](http://dev.cknewor.com/ticket/10265): Wrong loop type in the [File Browser](http://cknewor.com/addon/filebrowser) plugin.
* [#10249](http://dev.cknewor.com/ticket/10249): Wrong undo/redo states at start.
* [#10268](http://dev.cknewor.com/ticket/10268): [Show Blocks](http://cknewor.com/addon/showblocks) does not recover after switching to Source view.
* [#9995](http://dev.cknewor.com/ticket/9995): HTML code in the `<textarea>` should not be modified by the [`htmlDataProcessor`](http://docs.cknewor.com/#!/api/CKnewOR.htmlDataProcessor).
* [#10320](http://dev.cknewor.com/ticket/10320): [Justify](http://cknewor.com/addon/justify) plugin should add elements to Advanced Content Filter based on current [Enter mode](http://docs.cknewor.com/#!/api/CKnewOR.config-cfg-enterMode).
* [#10260](http://dev.cknewor.com/ticket/10260): Fixed: Advanced Content Filter blocks [`tabSpaces`](http://docs.cknewor.com/#!/api/CKnewOR.config-cfg-tabSpaces). Unified `data-cke-*` attributes filtering.
* [#10315](http://dev.cknewor.com/ticket/10315): [WebKit] [Undo manager](http://docs.cknewor.com/#!/api/CKnewOR.plugins.undo.UndoManager) should not record snapshots after a filling character was added/removed.
* [#10291](http://dev.cknewor.com/ticket/10291): [WebKit] Space after a filling character should be secured.
* [#10330](http://dev.cknewor.com/ticket/10330): [WebKit] The filling character is not removed on `keydown` in specific cases.
* [#10285](http://dev.cknewor.com/ticket/10285): Fixed: Styled text pasted from MS Word causes an infinite loop.
* [#10131](http://dev.cknewor.com/ticket/10131): Fixed: [`undoManager.update()`](http://docs.cknewor.com/#!/api/CKnewOR.plugins.undo.UndoManager-method-update) does not refresh the command state.
* [#10337](http://dev.cknewor.com/ticket/10337): Fixed: Unable to remove `<s>` using [Remove Format](http://cknewor.com/addon/removeformat).

## CKnewor 4.1

Fixed Issues:

* [#10192](http://dev.cknewor.com/ticket/10192): Closing lists with the *Enter* key does not work with [Advanced Content Filter](http://docs.cknewor.com/#!/guide/dev_advanced_content_filter) in several cases.
* [#10191](http://dev.cknewor.com/ticket/10191): Fixed allowed content rules unification, so the [`filter.allowedContent`](http://docs.cknewor.com/#!/api/CKnewOR.filter-property-allowedContent) property always contains rules in the same format.
* [#10224](http://dev.cknewor.com/ticket/10224): Advanced Content Filter does not remove non-empty `<a>` elements anymore.
* Minor issues in plugin integration with Advanced Content Filter:
  * [#10166](http://dev.cknewor.com/ticket/10166): Added transformation from the `align` attribute to `float` style to preserve backward compatibility after the introduction of Advanced Content Filter.
  * [#10195](http://dev.cknewor.com/ticket/10195): [Image](http://cknewor.com/addon/image) plugin no longer registers rules for links to Advanced Content Filter.
  * [#10213](http://dev.cknewor.com/ticket/10213): [Justify](http://cknewor.com/addon/justify) plugin is now correctly registering rules to Advanced Content Filter when [`config.justifyClasses`](http://docs.cknewor.com/#!/api/CKnewOR.config-cfg-justifyClasses) is defined.

## CKnewor 4.1 RC

New Features:

* [#9829](http://dev.cknewor.com/ticket/9829): Advanced Content Filter - data and features activation based on newor configuration.

  Brand new data filtering system that works in 2 modes:

  * Based on loaded features (toolbar items, plugins) - the data will be filtered according to what the newor in its
  current configuration can handle.
  * Based on [`config.allowedContent`](http://docs.cknewor.com/#!/api/CKnewOR.config-cfg-allowedContent) rules - the data
  will be filtered and the newor features (toolbar items, commands, keystrokes) will be enabled if they are allowed.

  See the `datafiltering.html` sample, [guides](http://docs.cknewor.com/#!/guide/dev_advanced_content_filter) and [`CKnewOR.filter` API documentation](http://docs.cknewor.com/#!/api/CKnewOR.filter).
* [#9387](http://dev.cknewor.com/ticket/9387): Reintroduced [Shared Spaces](http://cknewor.com/addon/sharedspace) - the ability to display toolbar and bottom newor space in selected locations and to share them by different newor instances.
* [#9907](http://dev.cknewor.com/ticket/9907): Added the [`contentPreview`](http://docs.cknewor.com/#!/api/CKnewOR-event-contentPreview) event for preview data manipulation.
* [#9713](http://dev.cknewor.com/ticket/9713): Introduced the [Source Dialog](http://cknewor.com/addon/sourcedialog) plugin that brings raw HTML newing for inline newor instances.
* Included in [#9829](http://dev.cknewor.com/ticket/9829): Introduced new events, [`toHtml`](http://docs.cknewor.com/#!/api/CKnewOR.newor-event-toHtml) and [`toDataFormat`](http://docs.cknewor.com/#!/api/CKnewOR.newor-event-toDataFormat), allowing for better integration with data processing.
* [#9981](http://dev.cknewor.com/ticket/9981): Added ability to filter [`htmlParser.fragment`](http://docs.cknewor.com/#!/api/CKnewOR.htmlParser.fragment), [`htmlParser.element`](http://docs.cknewor.com/#!/api/CKnewOR.htmlParser.element) etc. by many [`htmlParser.filter`](http://docs.cknewor.com/#!/api/CKnewOR.htmlParser.filter)s before writing structure to an HTML string.
* Included in [#10103](http://dev.cknewor.com/ticket/10103):
  * Introduced the [`newor.status`](http://docs.cknewor.com/#!/api/CKnewOR.newor-property-status) property to make it easier to check the current status of the newor.
  * Default [`command`](http://docs.cknewor.com/#!/api/CKnewOR.command) state is now [`CKnewOR.TRISTATE_DISABLE`](http://docs.cknewor.com/#!/api/CKnewOR-property-TRISTATE_DISABLED). It will be activated on [`newor.instanceReady`](http://docs.cknewor.com/#!/api/CKnewOR-event-instanceReady) or immediately after being added if the newor is already initialized.
* [#9796](http://dev.cknewor.com/ticket/9796): Introduced `<s>` as a default tag for strikethrough, which replaces obsolete `<strike>` in HTML5.

## CKnewor 4.0.3

Fixed Issues:

* [#10196](http://dev.cknewor.com/ticket/10196): Fixed context menus not opening with keyboard shortcuts when [Autogrow](http://cknewor.com/addon/autogrow) is enabled.
* [#10212](http://dev.cknewor.com/ticket/10212): [IE7-10] Undo command throws errors after multiple switches between Source and WYSIWYG view.
* [#10219](http://dev.cknewor.com/ticket/10219): [Inline newor] Error thrown after calling [`newor.destroy()`](http://docs.cknewor.com/#!/api/CKnewOR.newor-method-destroy).

## CKnewor 4.0.2

Fixed Issues:

* [#9779](http://dev.cknewor.com/ticket/9779): Fixed overriding [`CKnewOR.getUrl()`](http://docs.cknewor.com/#!/api/CKnewOR-method-getUrl) with `CKnewOR_GETURL`.
* [#9772](http://dev.cknewor.com/ticket/9772): Custom buttons in the dialog window footer have different look and size ([Moono](http://cknewor.com/addon/moono), [Kama](http://cknewor.com/addon/kama) skins).
* [#9029](http://dev.cknewor.com/ticket/9029): Custom styles added with the [`stylesSet.add()`](http://docs.cknewor.com/#!/api/CKnewOR.stylesSet-method-add) are displayed in the wrong order.
* [#9887](http://dev.cknewor.com/ticket/9887): Disable [Magic Line](http://cknewor.com/addon/magicline) when [`newor.readOnly`](http://docs.cknewor.com/#!/api/CKnewOR.newor-property-readOnly) is set.
* [#9882](http://dev.cknewor.com/ticket/9882): Fixed empty document title on [`newor.getData()`](http://docs.cknewor.com/#!/api/CKnewOR.newor-method-getData) if set via the Document Properties dialog window.
* [#9773](http://dev.cknewor.com/ticket/9773): Fixed rendering problems with selection fields in the Kama skin.
* [#9851](http://dev.cknewor.com/ticket/9851): The [`selectionChange`](http://docs.cknewor.com/#!/api/CKnewOR.newor-event-selectionChange) event is not fired when mouse selection ended outside newable.
* [#9903](http://dev.cknewor.com/ticket/9903): [Inline newor] Bad positioning of floating space with page horizontal scroll.
* [#9872](http://dev.cknewor.com/ticket/9872): [`newor.checkDirty()`](http://docs.cknewor.com/#!/api/CKnewOR.newor-method-checkDirty) returns `true` when called onload. Removed the obsolete `newor.mayBeDirty` flag.
* [#9893](http://dev.cknewor.com/ticket/9893): [IE] Fixed broken toolbar when newing mixed direction content in Quirks mode.
* [#9845](http://dev.cknewor.com/ticket/9845): Fixed TAB navigation in the [Link](http://cknewor.com/addon/link) dialog window when the Anchor option is used and no anchors are available.
* [#9883](http://dev.cknewor.com/ticket/9883): Maximizing was making the entire page newable with [divarea](http://cknewor.com/addon/divarea)-based newors.
* [#9940](http://dev.cknewor.com/ticket/9940): [Firefox] Navigating back to a page with the newor was making the entire page newable.
* [#9966](http://dev.cknewor.com/ticket/9966): Fixed: Unable to type square brackets with French keyboard layout. Changed [Magic Line](http://cknewor.com/addon/magicline) keystrokes.
* [#9507](http://dev.cknewor.com/ticket/9507): [Firefox] Selection is moved before newable position when the newor is focused for the first time.
* [#9947](http://dev.cknewor.com/ticket/9947): [WebKit] newor overflows parent container in some edge cases.
* [#10105](http://dev.cknewor.com/ticket/10105): Fixed: Broken [sourcearea](http://cknewor.com/addon/sourcearea) view when an RTL language is set.
* [#10123](http://dev.cknewor.com/ticket/10123): [WebKit] Fixed: Several dialog windows have broken layout since the latest WebKit release.
* [#10152](http://dev.cknewor.com/ticket/10152): Fixed: Invalid ARIA property used on menu items.

## CKnewor 4.0.1.1

Fixed Issues:

* Security update: Added protection against XSS attack and possible path disclosure in the PHP sample.

## CKnewor 4.0.1

Fixed Issues:

* [#9655](http://dev.cknewor.com/ticket/9655): Support for IE Quirks Mode in the new [Moono skin](http://cknewor.com/addon/moono).
* Accessibility issues (mainly in inline newor): [#9364](http://dev.cknewor.com/ticket/9364), [#9368](http://dev.cknewor.com/ticket/9368), [#9369](http://dev.cknewor.com/ticket/9369), [#9370](http://dev.cknewor.com/ticket/9370), [#9541](http://dev.cknewor.com/ticket/9541), [#9543](http://dev.cknewor.com/ticket/9543), [#9841](http://dev.cknewor.com/ticket/9841), [#9844](http://dev.cknewor.com/ticket/9844).
* [Magic Line](http://cknewor.com/addon/magicline) plugin:
    * [#9481](http://dev.cknewor.com/ticket/9481): Added accessibility support for Magic Line.
    * [#9509](http://dev.cknewor.com/ticket/9509): Added Magic Line support for forms.
    * [#9573](http://dev.cknewor.com/ticket/9573): Magic Line does not disappear on `mouseout` in a specific case.
* [#9754](http://dev.cknewor.com/ticket/9754): [WebKit] Cutting & pasting simple unformatted text generates an inline wrapper in WebKit browsers.
* [#9456](http://dev.cknewor.com/ticket/9456): [Chrome] Properly paste bullet list style from MS Word.
* [#9699](http://dev.cknewor.com/ticket/9699), [#9758](http://dev.cknewor.com/ticket/9758): Improved selection locking when selecting by dragging.
* Context menu:
    * [#9712](http://dev.cknewor.com/ticket/9712): Opening the context menu destroys newor focus.
    * [#9366](http://dev.cknewor.com/ticket/9366): Context menu should be displayed over the floating toolbar.
    * [#9706](http://dev.cknewor.com/ticket/9706): Context menu generates a JavaScript error in inline mode when the newor is attached to a header element.
* [#9800](http://dev.cknewor.com/ticket/9800): Hide float panel when resizing the window.
* [#9721](http://dev.cknewor.com/ticket/9721): Padding in content of div-based newor puts the newing area under the bottom UI space.
* [#9528](http://dev.cknewor.com/ticket/9528): Host page `box-sizing` style should not influence the newor UI elements.
* [#9503](http://dev.cknewor.com/ticket/9503): [Form Elements](http://cknewor.com/addon/forms) plugin adds context menu listeners only on supported input types. Added support for `tel`, `email`, `search` and `url` input types.
* [#9769](http://dev.cknewor.com/ticket/9769): Improved floating toolbar positioning in a narrow window.
* [#9875](http://dev.cknewor.com/ticket/9875): Table dialog window does not populate width correctly.
* [#8675](http://dev.cknewor.com/ticket/8675): Deleting cells in a nested table removes the outer table cell.
* [#9815](http://dev.cknewor.com/ticket/9815): Cannot new dialog window fields in an newor initialized in the jQuery UI modal dialog.
* [#8888](http://dev.cknewor.com/ticket/8888): CKnewor dialog windows do not show completely in a small window.
* [#9360](http://dev.cknewor.com/ticket/9360): [Inline newor] Blocks shown for a `<div>` element stay permanently even after the user exits newing the `<div>`.
* [#9531](http://dev.cknewor.com/ticket/9531): [Firefox & Inline newor] Toolbar is lost when closing the Format drop-down list by clicking its button.
* [#9553](http://dev.cknewor.com/ticket/9553): Table width incorrectly set when the `border-width` style is specified.
* [#9594](http://dev.cknewor.com/ticket/9594): Cannot tab past CKnewor when it is in read-only mode.
* [#9658](http://dev.cknewor.com/ticket/9658): [IE9] Justify not working on selected images.
* [#9686](http://dev.cknewor.com/ticket/9686): Added missing contents styles for `<pre>` elements.
* [#9709](http://dev.cknewor.com/ticket/9709): [Paste from Word](http://cknewor.com/addon/pastefromword) should not depend on configuration from other styles.
* [#9726](http://dev.cknewor.com/ticket/9726): Removed [Color Dialog](http://cknewor.com/addon/colordialog) plugin dependency from [Table Tools](http://cknewor.com/addon/tabletools).
* [#9765](http://dev.cknewor.com/ticket/9765): Toolbar Collapse command documented incorrectly in the [Accessibility Instructions](http://cknewor.com/addon/a11yhelp) dialog window.
* [#9771](http://dev.cknewor.com/ticket/9771): [WebKit & Opera] Fixed scrolling issues when pasting.
* [#9787](http://dev.cknewor.com/ticket/9787): [IE9] `onChange` is not fired for checkboxes in dialogs.
* [#9842](http://dev.cknewor.com/ticket/9842): [Firefox 17] When opening a toolbar menu for the first time and pressing the *Down Arrow* key, focus goes to the next toolbar button instead of the menu options.
* [#9847](http://dev.cknewor.com/ticket/9847): [Elements Path](http://cknewor.com/addon/elementspath) should not be initialized in the inline newor.
* [#9853](http://dev.cknewor.com/ticket/9853): [`newor.addRemoveFormatFilter()`](http://docs.cknewor.com/#!/api/CKnewOR.newor-method-addRemoveFormatFilter) is exposed before it really works.
* [#8893](http://dev.cknewor.com/ticket/8893): Value of the [`pasteFromWordCleanupFile`](http://docs.cknewor.com/#!/api/CKnewOR.config-cfg-pasteFromWordCleanupFile) configuration option is now taken from the instance configuration.
* [#9693](http://dev.cknewor.com/ticket/9693): Removed "Live Preview" checkbox from UI color picker.


## CKnewor 4.0

The first stable release of the new CKnewor 4 code line.

The CKnewor JavaScript API has been kept compatible with CKnewor 4, whenever
possible. The list of relevant changes can be found in the [API Changes page of
the CKnewor 4 documentation][1].

[1]: http://docs.cknewor.com/#!/guide/dev_api_changes "API Changes"
